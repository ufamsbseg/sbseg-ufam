package br.com.ufam.parsers;import java.io.IOException;import java.io.InputStream;import java.util.ArrayList;import org.xml.sax.Attributes;import org.xml.sax.SAXException;import android.content.Context;import android.sax.Element;import android.sax.EndElementListener;import android.sax.EndTextElementListener;import android.sax.RootElement;import android.sax.StartElementListener;import android.util.Xml;import br.com.ufam.beans.Author;import br.com.ufam.beans.Paper;import br.com.ufam.beans.TechnicalSession;public class SymposiaParse {		private static TechnicalSession techSession;	private static Paper paperSession;	private static Author authorSession;	private static ArrayList<Author> arrayAuthor;	private static ArrayList<Paper> arrayPaper;	private static ArrayList<TechnicalSession> arrayTechSession;	private static InputStream is;		 public static ArrayList<TechnicalSession> parse(Context context) throws IOException, SAXException {	       	        final RootElement technical_symposia = new RootElement("technical_sessions"); //pega o root do xml	        	        arrayTechSession = new ArrayList<TechnicalSession>();	        is = context.getResources().getAssets().open("SBSEG2013_Sessoes_Tecnicas.xml"); //abre o arquivo xml de onde as informações serão extraídas	         	        technical_symposia.setStartElementListener(new StartElementListener() { //abre a tag "technical_symposia"						public void start(Attributes attrb) {					}			});	        	        Element technical_session = technical_symposia.getChild("technical_session");	        	        technical_session.setStartElementListener(new StartElementListener() {	//abre a tag "technical_sessions"							public void start(Attributes attrb) {					techSession = new TechnicalSession();				}			});	        	        technical_session.getChild("date").setEndTextElementListener(new EndTextElementListener(){ //pega referência de um item	            public void end(String date) {	                techSession.setDate(date);	            }	        });	        	        technical_session.getChild("id").setEndTextElementListener(new EndTextElementListener(){	            public void end(String id) {	                techSession.setId(id);	            }	        });	        	        technical_session.getChild("weekday").setEndTextElementListener(new EndTextElementListener(){	            public void end(String weekDay) {	                techSession.setDayWeek(weekDay);	            }	        });	        	        technical_session.getChild("beginning").setEndTextElementListener(new EndTextElementListener(){	            public void end(String beginning) {	                techSession.setBeginning(beginning);	            }	        });	        	        technical_session.getChild("end").setEndTextElementListener(new EndTextElementListener(){	            public void end(String end) {	                techSession.setEnd(end);	            }	        });	        	        technical_session.getChild("name").setEndTextElementListener(new EndTextElementListener(){	            public void end(String name) {	                techSession.setName(name);	            }	        });	        	        technical_session.getChild("local").setEndTextElementListener(new EndTextElementListener(){	            public void end(String local) {	                techSession.setLocal(local);	            }	        });	        	        Element papers = technical_session.getChild("papers");	        	        papers.setStartElementListener(new StartElementListener() { //abre a tag "papers"				public void start(Attributes attrb) {					arrayPaper = new ArrayList<Paper>();				}			});	        	        Element paper = papers.getChild("paper");	        	        paper.setStartElementListener(new StartElementListener() { //abre a tag "paper"								public void start(Attributes attrb) {					paperSession = new Paper();				}			});	        	        paper.getChild("beginning").setEndTextElementListener(new EndTextElementListener(){	            public void end(String beginning) {	                paperSession.setBeginning(beginning);	            }	        });	        	        paper.getChild("end").setEndTextElementListener(new EndTextElementListener(){	            public void end(String end) {	                paperSession.setEnd(end);	            }	        });	        	        paper.getChild("name").setEndTextElementListener(new EndTextElementListener(){	            public void end(String name) {	                paperSession.setName(name);	            }	        });	        	        Element authors = paper.getChild("authors");	        	        authors.setStartElementListener(new StartElementListener() { //abre a tag "authors"				public void start(Attributes attrb) {					arrayAuthor = new ArrayList<Author>();				}			});	        	        Element author = authors.getChild("author");	        	        author.setStartElementListener(new StartElementListener() { //abre a tag "author"				public void start(Attributes attrb) {					authorSession = new Author();				}			});	        	        author.getChild("name").setEndTextElementListener(new EndTextElementListener(){	            public void end(String name) {	                authorSession.setName(name);	            }	        });	        	        author.getChild("affiliation").setEndTextElementListener(new EndTextElementListener(){	            public void end(String affiliation) {	                authorSession.setAffiliation(affiliation);	            }	        });	        	        author.getChild("country").setEndTextElementListener(new EndTextElementListener(){	            public void end(String country) {	                authorSession.setCountry(country);	            }	        });	        	        author.setEndElementListener(new EndElementListener() { //fecha a tag "author"								public void end() { 					arrayAuthor.add(authorSession);				}			});	        	        authors.setEndElementListener(new EndElementListener() { //fecha a tag "authors"								public void end() {					paperSession.setAuthors(arrayAuthor);				}			});	        	        paper.setEndElementListener(new EndElementListener() { //fecha a tag "paper"								public void end() {					arrayPaper.add(paperSession);				}			});	        	        papers.setEndElementListener(new EndElementListener() { //fecha a tag "papers"								public void end() { 					techSession.setPapers(arrayPaper);				}			});	        technical_session.setEndElementListener(new EndElementListener() { //fecha a tag "technical_session"								public void end() { 					arrayTechSession.add(techSession); 				}			});	                    Xml.parse(is, Xml.Encoding.UTF_8, technical_symposia.getContentHandler());            	        return  arrayTechSession;	    }}