package br.com.sbseg.activities;import java.io.IOException;import java.util.ArrayList;import org.xml.sax.SAXException;import android.app.Activity;import android.content.Context;import android.content.Intent;import android.os.AsyncTask;import android.os.Bundle;import android.util.Log;import android.view.View;import android.widget.AdapterView;import android.widget.AdapterView.OnItemClickListener;import android.widget.ListView;import br.com.sbseg.R;import br.com.sbseg.adapters.ListViewWorkShopAdapter;import br.com.sbseg.beans.TechnicalSession;import br.com.sbseg.parsers.WorkshopParse;public class WorkshopActivity extends Activity {		Intent intent;	private ListView techSessions;	private ListViewWorkShopAdapter adapter;	public Context context;	private ArrayList<TechnicalSession> techSessionList;	public static String tag;		@Override    public void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);                Intent intentViewPager = getIntent();        String tagAuxString = intentViewPager.getStringExtra("tag");        String[] tagAuxSplit = tagAuxString.split("#");        tag = tagAuxSplit[0].replace("*","");                context = this;            adapter = new ListViewWorkShopAdapter(this);                techSessions = (ListView) findViewById(R.id.list_view);        techSessions.setAdapter(adapter);                parseTechnicalSession();                techSessions.setOnItemClickListener(new OnItemClickListener(){ //Esse método é usado para pegar um item da lista que foi escolhido pelo usuário.									public void onItemClick(AdapterView<?>parent, View view, int position, long id){				//ListView Clicked item index				int itemPosition = position;								//ListView Clicked item value				TechnicalSession objectSession = (TechnicalSession)techSessions.getItemAtPosition(itemPosition);								Bundle bundle = new Bundle();				bundle.putSerializable("objectSession", objectSession); //Adiciona o item no bundle				intent = new Intent(WorkshopActivity.this,WorkshopSecondActivity.class);				intent.putExtras(bundle); //Adiciona o bundle na intent		        startActivity(intent); 			}		});    }			public void parseTechnicalSession(){		new AsyncTask<Void, Void, Void>(){			@Override			protected Void doInBackground(Void... params) {								try {					techSessionList = WorkshopParse.parse(context); //techSessionList recebe as informações contidas no xml, através do parse				} catch (IOException e) {					// TODO Auto-generated catch block					e.printStackTrace();				} catch (SAXException e) {					// TODO Auto-generated catch block					e.printStackTrace();				}								return null;			}			@Override			protected void onPostExecute(Void result) {								super.onPostExecute(result);												adapter.setData(techSessionList); //Seta no adapter o tipo de dado que o mesmo irá trabalhar.								//added para testar o foco				int counter = 0; //usado para encontrar a posição da view na listView				short flag = 0; //Usado para indicar se o grupo foi encontrado				for(TechnicalSession techS : techSessionList){					Log.e("Loop Status", "Entrando no foreach");					counter++;					Log.e("counter", ""+counter);					String tagAuxString = techS.getId();					String[] tagAux = tagAuxString.split("-");					String tagClass = tagAux[0];					Log.e("tag no foreach",""+tag);					Log.e("tagClass no foreach",""+tagClass);					if(tag.equals(tagClass)){						techSessions.setSelection(counter);						flag = 1;					}					if(flag != 0) break;									}			}					}.execute();	}}